const { expect } = require("chai");
const { ethers } = require("hardhat");
// const ObjectsToCsv = require('objects-to-csv');
require('dotenv').config();

function rand() {
    return Math.floor(Math.random() * 100000000);
}

const timerData = 
[
    '154065184996315261698719985747112926054600010416868909574668288',
    
    '60659880001089155045186218212180510983806382225820921467318965370880',
    
    '3534341168315346789882626224775544465366814652799909585759036737385857024',
    
    '1325216178423795192241342389087032688659894121733978982574737157267652608',
    
    '5512562842108627126974292852582003087799333062857226869633397117486997965872',
    
    '1520446210964812359421330694942816604595614907941204027200168460288',
    
    '1766820104831720317302808584465551131966895358678159575990683819113988096',
    
    '60659880001089155045186218212180510983806382225820921467318965370880',
    
    '3975405895751378865041323996750674374684918905979867661656322505793601536',
    
    '102844034832578483325664902099304776825829824217637495632822272',
    
    '73787011479214227456',
    
    '27138772101233720217811660863804406901775475543967431685543453019673206915072',
    
    '1215057836341814340552387873440951415598792057345725626769276134605455360',
    
    '54245738582826096959318056480994284470740068670839099625301266491049408231406',
    
    '1007048789080658882301844605942372687090422804424315661376068583424',
    
    '1766820104831720317302808587225269793826666256969712112206677360542482492',
    
    '414104782452939169205008317226686189178094944271261071737761874780880896',
    
    '2787593149816664612382650408078767703457792',
    
    ];

const faceData = [
    '154065184996315261698719985747112926054600010416868909574668288',
    
    '60659880001089155045186218212180510983806382225820921467318965370880',
    
    '3534341168315346789882626224775544380316992109998828604413187693297532928',
    
    '1325216178423795192241342389086706017587650020809054142951586785585528832',
    
    '3615610599582728119969414707767615855674956736011283879430112',
    
    '17976470139170254840133007373533572386956990002429952',
    
    '1901476013679146446516383662080',
    
    '60659880001089155045186218212180510983806382225820921467318965370880',
    
    '3975405895751378865041323996750674374684918905979867661656322505793601536',
  
    '102844034832578483325664902099304776825829824217637495632822272',
    
    '73787011479214227456',
    
    '27138772101233720217811648902875006985665992965010760131057203836350349180928',
    
    '1215057836341814147457949724338595924267598122952156714879595861952692224',
    
    '3615610599582728119969414707767615855674956736011283879430112',
    
    '77838115702607111508013929752883465632901924600741888',
    
    '2765292487029937761905247383706047255320461372',
    
    '414104782452939169205008317226686189178094944271261071737761874780880896',
    
    '2787593149816664612382650408078767703457792',
    
    ]

    const islandData =  ['215682144387859885109560000158392704357296514047503851826402060958901',
    
    '113495160187518652357887046427394540778109649156032018159923869571255770415376',
    
    '114458615335068111925400406002890694146136894957349272561245014035095357504',
    
    '68766103483569937662513708549859923285450492847168159137152153767996253588488',
    
    '21707652254501729341814189060312831910816671851240568055151831437276516171775',
    
    '105060702740336674949450205062761313470070461062538888241171392817388038078468',
    
    '90483771983532903410350651096131134977356082598926730204084869447954567845888',
    
    '3618513250813712781840556741640594899713099323876223831232090022539173560320',
    
    '3570242327362256528346628777396278034205535825761063157769186910199972102144',
    
    '1973683778179814790934449679809183038147012189679844965797257778561049346',
    
    '1865790672645049829111385181648507797476502342419054634590799887347450005777',
    
    '3619847201169310000537636195435547372432291438586266532023741909509070389504',
    
    '59080187917310571997773614854898290689934687265847019665440174222454720611100',
    
    '14484722787089638624620897340188568784111297597974053460222604832485134041088',
    
    '10617474036067209766761853975571453175553726692720378320591224929257914884',
    
    '61083436779756929259736982906024513812310116245655772117689761365130381412099',
    
    '82320828122681316274862947693816722685102357950503518575583016686035520303104',
    
    '7950855390791510082117091047993063946722441876616019704697862996560445440',
    
    ];

    const tentData = [
        '154065184996315261698724749700250056895105464847524413348921347',
        
        '876356204789960034633259332172624142940479755055024721946307198240218873856',
        
        '3534529887903450329000229718916470035972869191727569380377044455035764736',
        
        '12078056106883581642734356444431572867290697432760493900875763554451456',
        
        '13951024423490169041617338103010656618056003278046345359051734412792973779139',
        
        '23669554616717391061027107637474809913297411478688905969155339983872',
        
        '6927863795124746028629974276279929453615397354566280213080923789344768',
        
        '60659880001089155045186218212180510983806382225820921467318965370880',
        
        '3975405895751378865041323996750674374684918905979867661656322505793601536',
        
        '102844036269293052954337942405849203151530429660095949962215427',
        
        '2685607538463145587037400927747154490967312281649276309518611642150546833408',
        
        '835758346681669833634677467697608551004445934720667877544286599774208',
        
        '43135914667441363885477296369160444173070814363029344494486595760553984',
        
        '46800245051850228958555577287487221273781513736996672795957000098258723518799',
        
        '200649329022564222171186940260092804549691523491937827155231490829312',
        
        '427961350896017268499090905832790117505288902106569515555358077058285628',
        
        '414104782452939169205008317226686189178094944271261071737761874780880896',
        
        '2787593149816664612382650408078767703457792',
        
        ]

    const waterfall = [
        '192832565311122997817638544449385281580383167577293864601388640',
        
        '43998889659501135662189438833329526861189556492249925916003661462528582',
        
        '31661902093693471030765169766399875686568136189811101460280628405530555056132',
        
        '50659049393951307782229092277325316687927612648191685765974617848139372066816',
        
        '14481079362674529269253975503180267105267329103517668696065170589312006226304',
        
        '53833621662935025123317378206984772908062640121574755871725156304543006750',
        
        '32567354116362766737352045756902318847873846946658260437659914427136405960704',
        
        '1865791316786871521334134951096558880027890856687738375444246445001451503616',
        
        '53005411943351533001532810454744626348748798204073643958839515877656756280',
        
 
        '189618689222721925979559551265843668968854704134093956153607648',
        
        '52626230561426880012354675543751402458231268139723418300090979446412235',
        
        '98604203466654004149435617259340743698081037634200910693414133424531705954314',
        
        '83225574491952870503121373273771883027662902389671260888467024670698254597120',
        
        '43432636218741474003669783279943873060058396810763579604177739485265711333760',
        
        '110400334721230689636705891478759975765902045443204877889762345068728950814',
        
        '18106609894164134651790985031150706279580611605199891884684974222935144298496',
        
        '1865791315101874854638195732619989443165584574170441121507728684983896768512',
        
        '53005411943351533001532810454747065503471792624584719626111224791008542788',
        
        ]


describe("NFTraits", async function () {
    
    it("get URI", async function () {
    
        const NFTraitsFactory = await hre.ethers.getContractFactory("NFTraits");
        const NFTraits = await NFTraitsFactory.deploy();
        await NFTraits.deployed();    

        const MetadataFactory = await hre.ethers.getContractFactory("TraitsMetadata");
        const Metadata = await MetadataFactory.deploy();
        await Metadata.deployed();   

        const MockBlergsFactory = await hre.ethers.getContractFactory("MockBlergs");
        const MockBlergs = await MockBlergsFactory.deploy();
        await MockBlergs.deployed();   

        NFTraits.addSeason(1, Metadata.address);
        NFTraits.setActiveSeason(1);
        NFTraits.flipOpenState();
        // // GORERLI 
        NFTraits.setVRFAddress('0x326C977E6efc84E512bB9C30f76E30c160eD06FB', '0x708701a1DfF4f478de54383E49a627eD4852C816')
       
        NFTraits.setBlergsTokenAddress(MockBlergs.address);
        
        const overrides = { value: ethers.utils.parseEther('0.01')};

        await NFTraits.mintTraitsTest(123456789, [...Array(10)].map( x => rand()), overrides)
        NFTraits.setActiveSeason(2);
        await NFTraits.mintTraitsTest(1256789, [...Array(10)].map( x => rand()), overrides)
        await NFTraits.mintTraitsTest(125622789, [...Array(10)].map( x => rand()), overrides)

        await Metadata.store( 0,faceData,2,'RmFjZS4g');
        await Metadata.store( 1,timerData,4,'VGltZXIu');
        await Metadata.store( 2,islandData,10,'SXNsYW5k');
        await Metadata.store( 3,waterfall,8,'d2F0ZXJmYWxs');
        await Metadata.store( 4,tentData,1,'YWJzdHJhY3Qu');

        const uri = await NFTraits.uri(0);
        console.log(uri, '...complete')


    });
});
